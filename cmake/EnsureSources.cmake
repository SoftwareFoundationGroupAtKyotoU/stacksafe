function(ensure_sources target)
  get_target_property(source_files ${target} SOURCES)
  file(GLOB glob_files *.cpp)
  list(TRANSFORM glob_files REPLACE "^.*/" "")
  foreach(file IN LISTS glob_files)
    if(NOT file IN_LIST source_files)
      list(APPEND missing_files "${file}")
    endif()
  endforeach()
  if(missing_files)
    list(JOIN missing_files " " missings)
    message(FATAL_ERROR "missing sources to add: ${missings}")
  endif()
endfunction()
